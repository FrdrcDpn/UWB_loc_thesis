<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Swarmulator: Swarmulator</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Swarmulator
   &#160;<span id="projectnumber">1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Swarmulator </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><img src="https://raw.githubusercontent.com/coppolam/swarmulator/master/logo.png" alt="" align="left" class="inline"/></p>
<p>Swarmulator is a lightweight C++ simulator for simulating swarms. Swarmulator offers a simple platform to prototype swarm behaviors.</p>
<h1>Install Instructions</h1>
<p><em>Note: Swarmulator was tested on Ubuntu 16.04, 18.04, and 20.04</em> <em>Swarmulator was also tested successfully on Windows 10 using Ubuntu for Windows, which you can download here: <a href="https://ubuntu.com/tutorials/ubuntu-on-windows#4-install-ubuntu-for-windows-10">https://ubuntu.com/tutorials/ubuntu-on-windows#4-install-ubuntu-for-windows-10</a>. Once installed, you can just follow the steps below as if you were on Ubuntu. (Unfortunately for now, the animation may not work, but all other primary functionalities should work)</em></p>
<h3>Download the repository</h3>
<p>Download/clone the repository. </p><pre class="fragment">git clone https://github.com/coppolam/swarmulator.git
cd swarmulator
</pre><h3>Packages Required</h3>
<p>Swarmulator runs using OpenGL and XML parsing. You will need the following packages. Run the following to make sure you have everything you need, installed in order: </p><pre class="fragment">sudo apt-get install make g++ freeglut3-dev libxerces-c-dev xsdcxx libeigen3-dev libprotobuf-dev xmlstarlet
</pre><h3>Build instructions</h3>
<p>Once you have all the packages needed to build Swarmulator, you can build it with: </p><pre class="fragment">make clean &amp;&amp; make ANIMATION=ON LOG=ON VERBOSE=ON
</pre><p>If you don't want the animation, just don't type the <code>ANIMATION=ON</code> part, same for <code>LOG</code>, which logs data, or <code>VERBOSE</code> which outputs information to the console</p>
<p>Swarmulator is designed to be modular, so that you can compile for any combination of controller and robot dynamics that you wish. By default, the <code>aggregation</code> controller and the <code>particle</code> agent will be used. To use another one, speficity this in the make command, as follows: </p><pre class="fragment">make clean &amp;&amp; make CONTROLLER=&lt;yourcontrollername&gt; AGENT=&lt;youragentname&gt; ANIMATION=ON
</pre><p>for example, try out: </p><pre class="fragment">make clean &amp;&amp; make CONTROLLER=boid AGENT=particle_oriented ANIMATION=ON
</pre><p>To find which agents and controllers are available in the branch, check the folders <code>sw/simulation/controllers</code> and <code>sw/simulation/agents</code>. See the next section "Prototyping with Swarmulator" for instructions on how to make your own!</p>
<p>(Pro tip: If you want it to build fast, use <code>make -j</code> instead of just <code>make</code>, but this will take up more memory. On a virtual machine, where memory is limited, using <code>-j</code> may cause it to fail to build.)</p>
<p>For other controllers, please note that you may have to indicate a correct policy in the XML file <code>conf/parameters.xml</code>. Read the controller specific READMEs to find out more about what they do. Also, note that not all provided controllers work with all agents (because they control different variables). This is also detailed in the controller specific READMEs.</p>
<h3>Extra: Generate the doxygen documetation</h3>
<p>Swarmulator was commented using the doxygen format. To generate the doxygen documentation, use </p><pre class="fragment">doxygen doxyfile
</pre><p>And access the documentation using </p><pre class="fragment">xdg-open docs/html/index.html 
</pre><h1>Running Swarmulator</h1>
<p>Swarmulator can be launched from the terminal. To run Swarmulator, use the following command: </p><pre class="fragment">./swarmulator &lt;nagents&gt;
</pre><p>Where &lt;nagents&gt; is the number of agents you would like to have at the start of the simulation. ./swarmulator 10</p>
<h3>Setting up the runtime parameters</h3>
<p>Swarmulator uses a configuration file called <code>parameters.xml</code> in order to load run-time parameters. These are loaded when Swarmulator starts, without having to re-build!</p>
<p><code>parameters.xml</code> is to be found in in the <code>conf</code> folder.</p>
<p>Here you can edit all the run-time parameters. The standard ones are described below. In the next sub-section, you can find out how to make your own!</p>
<ul>
<li><code>simulation_updatefreq</code>: Refresh-rate of the simulation (Hz)</li>
<li><code>simulation_realtimefactor</code>: Simulation real-time factor. The higher the faster, up to whatever your computer can handle, since eventually the mutex synchronization will win, which is particularly relavant for large numbers of robots.</li>
<li><code>time_limit</code>: The time limit of simulated time after which the simulator will quit. If set to 0, then the simulation won't quit until you make it quit.</li>
<li><code>environment</code>: The environment that the robots operate in (essentially defining the walls). Use <code>square</code> for a standard squared room, or leave it empty for a boundless environment. For a randomly generated environment, use <code>random</code>. You can always make your own enviromment by defining it and placing it in <code>conf/environments</code>.</li>
<li><code>window_width</code>: Height of the animation window (in pixels)</li>
<li><code>window_height</code>: Width of the animation window (in pixels)</li>
<li><code>scale</code>: Scale of the agents drawn in the animation window</li>
<li><code>mouse_drag_speed</code>: Sensitivity of the mouse during drag-and-drop actions. Use 1.0 for a 1 to 1 feel.</li>
<li><code>mouse_zoom_speed</code>: Sensitivity of zoom function to motion of the scroll wheel.</li>
<li><code>animation_updatefreq</code>: Frame-rate of the animation.</li>
<li><code>logger_updatefreq</code>: Log-rate. If the logger thread is activated, then this will create a text log at the indicated rate (with respect to the simulation time).</li>
<li><code>policy</code> : This is the (relative) path to a file that holds the specifics of a policy (if your controller needs one, else it's not relevant). For instance, it can be a txt file holding the probability of doing something, or the weights of a neural network.</li>
<li><code>fitness</code>: This specifies the fitness function that would like to use (if relevant to your application). Please see the file for the current options <code><a class="el" href="fitness__functions_8h_source.html">sw/simulation/fitness_functions.h</a></code>, and feel free to implement your own! To use it, specify the name of the fitness function. For instance <code>&lt;fitness&gt;aggregation_clusters&lt;/fitness&gt;</code> will measure how aggregated the swarm is.</li>
</ul>
<h3>Adding your own additional runtime parameters</h3>
<p>It is possible to easily add your own runtime parameter to Swarmulator. This can be done into three quick steps.</p><ol type="1">
<li>Open <code>conf/parameters.xsd</code>. Here you declare the new parameter as an additional XSD element. <code>&lt;xs:element name="parameter_name" type="xs:parameter_type"/&gt;</code></li>
<li>Open <code>conf/parameters.xml</code>. Here you define the value of the parameter to be read at runtime. <code>&lt;new_parameter_name&gt;default value&lt;/new_parameter_name&gt;</code> That's it! Now you use the parameter anywhere in the code by calling <code>param-&gt;new_parameter_name()</code>.</li>
</ol>
<h3>Interactive user commands when using the animation</h3>
<p>You can interact with Swarmulator in real time through the animation window. It is possible to intuitively move and zoom within the animation using drag-and-drop and your mouse's scroll wheel.</p>
<p>Additionally, there are a number of keyboard commands for the following:</p><ul>
<li>Add a new agent (<code>a</code>). This can be done by pressing the <code>a</code>, at which point a new agent will be created at the location pointed by the mouse cursor.</li>
<li>Pause (<code>p</code>). The simulation can be paused by pressing the <code>p</code> key.</li>
<li>Resume (<code>r</code>, note: it only works after pausing by pressing <code>p</code>). Resume the simulation.</li>
<li>Step-through (<code>s</code>, note: it only works after pausing by pressing <code>p</code>). This will run the simulation for a very small time step and then pause. It can be pressed repeatedly to slowly step through the simulation.</li>
<li>Toggle real-time factor (<code>m</code>). Toggle the realtime factor between the value specified in <code>conf/parameters.xml</code> and <code>1</code>. This allows you analyze the swarm in the animation.</li>
<li>Quit (<code>q</code>). This will quit Swarmulator.</li>
</ul>
<h1>Prototyping with Swarmulator</h1>
<p>Swarmulator is built for quick prototyping, making it simple to switch out different controllers and agents in the swarm. The controller and agent in use are defined in <code><a class="el" href="settings_8h_source.html">sw/settings.h</a></code>. Using this approach, you can quickly switch out different controllers and then recompile the code.</p>
<h3>Using your own controller</h3>
<p>All controllers must be a child of the class <code><a class="el" href="classController.html">Controller</a></code>, to be found at <code>sw/simulation/controller.cpp</code>. You can define a controller as a child class of <code><a class="el" href="classController.html">Controller</a></code>, and then define that you want to use it in <code><a class="el" href="settings_8h_source.html">sw/settings.h</a></code>. You can look at the controllers in <code>sw/simulation/controllers/...</code> for examples. You can use the functions in <code><a class="el" href="classOmniscientObserver.html">OmniscientObserver</a></code> in order to simulate the sensing of other agents as you see fit.</p>
<p>The bash script found in <code>scripts/make_new_controller.sh</code> will create an empty controller for you, ready for use! You can run it as follows: </p><pre class="fragment">cd scripts
./make_new_controller.sh myawesomenewcontroller
</pre><h3>Using your agent dynamics</h3>
<p>All agents must be a child of the class <code><a class="el" href="classAgent.html">Agent</a></code>, to be found at <code>sw/simulation/agent.cpp</code>. You can define an agent as a child class of <code><a class="el" href="classAgent.html">Agent</a></code>, and, as for controllers, define that you want to use it in <code><a class="el" href="settings_8h_source.html">sw/settings.h</a></code>. You can look at the controllers in <code>sw/simulation/agents/...</code> for examples of agents, where you can declare the dynamics of the agents.</p>
<p>The bash script found in <code>scripts/make_new_agent.sh</code> will create an empty controller for you, ready for use! You can run it as follows: </p><pre class="fragment">cd scripts
./make_new_agent.sh myawesomenewagent
</pre><h1>Using Swarmulator to evolve a swarm behavior</h1>
<p>Swarmulator was originally designed just to quickly prototype and analyze swarm behaviors. However, thanks to its speed and ability to operate at high real time factors, it also lends itself to doing evolution of swarm controllers in a (relatively) short amount of time.</p>
<p>Please see the file <code>scripts/python/example_evolution.py</code> and the README file in the same folder for an example that uses evolution to evolve a policy.</p>
<h1>PYTORCH!</h1>
<p>It's now possible to use Swarmulator with the PyTorch C++ library. An example controller with README instructions to set it up is avaiable in the controller <code>pytorch</code> under <code>sw/simulation/controllers</code>. Go check it out and have fun! </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
